<Window x:Class="SayoOSD.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SayoDevice OSD 설정" Height="630" Width="980">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 상단: 설정 버튼 및 언어 -->
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 최상단: 설정 버튼 및 언어 -->
        <Grid Grid.Row="0" Margin="0,0,5,10">
            <Button x:Name="BtnOpenSettings" Content="⚙ 설정" HorizontalAlignment="Left" Click="BtnOpenSettings_Click" Padding="10,5"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <TextBlock Text="Language: " VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox x:Name="CboLanguage" Width="114" SelectionChanged="CboLanguage_SelectionChanged"/>
            </StackPanel>
        </Grid>

        <!-- 중단: 키 매핑 리스트 -->
        <GroupBox x:Name="GrpMap" Header="키 매핑 설정 (settings.json 직접 수정 권장)" Grid.Row="1" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="120*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Row 0: 로그 리스트 -->
                <ListView x:Name="LstLog" Grid.Row="0" SelectionMode="Extended" KeyDown="LstLog_KeyDown" MouseDoubleClick="LstLog_MouseDoubleClick">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Foreground" Value="{Binding Foreground}"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ListView.ContextMenu>
                        <ContextMenu>
                            <MenuItem x:Name="MnuCopy" Header="복사" Click="BtnCopyLog_Click"/>
                        </ContextMenu>
                    </ListView.ContextMenu>
                    <ListView.View>
                        <GridView>
                            <GridViewColumn x:Name="ColTime" Header="시간" DisplayMemberBinding="{Binding Time}" Width="70"/>
                            <GridViewColumn x:Name="ColKey" Header="키값(Hex)" DisplayMemberBinding="{Binding RawKeyHex}" Width="70"/>
                            <GridViewColumn x:Name="ColData" Header="전체 데이터" DisplayMemberBinding="{Binding Data}" Width="530"/>
                        </GridView>
                    </ListView.View>
                </ListView>

                <!-- Row 1: 레이어 선택 및 로그 제어 -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                    <TextBlock x:Name="LblLayer" Text="레이어:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <RadioButton x:Name="RbLayer0" Content="Fn 0" GroupName="Layers" Tag="0" Style="{StaticResource {x:Type ToggleButton}}" Width="60" Height="21.96" Margin="2" Checked="RbLayer_Checked"/>
                    <RadioButton x:Name="RbLayer1" Content="Fn 1" GroupName="Layers" Tag="1" Style="{StaticResource {x:Type ToggleButton}}" Width="60" Height="21.96" Margin="2" Checked="RbLayer_Checked"/>
                    <RadioButton x:Name="RbLayer2" Content="Fn 2" GroupName="Layers" Tag="2" Style="{StaticResource {x:Type ToggleButton}}" Width="60" Height="21.96" Margin="2" Checked="RbLayer_Checked"/>
                    <RadioButton x:Name="RbLayer3" Content="Fn 3" GroupName="Layers" Tag="3" Style="{StaticResource {x:Type ToggleButton}}" Width="60" Height="21.96" Margin="2" Checked="RbLayer_Checked"/>
                    <RadioButton x:Name="RbLayer4" Content="Fn 4" GroupName="Layers" Tag="4" Style="{StaticResource {x:Type ToggleButton}}" Width="60" Height="21.96" Margin="2" Checked="RbLayer_Checked"/>
                </StackPanel>

                <!-- Row 2: 배지 그리드 (2x6) -->
                <UniformGrid x:Name="GridBadges" Grid.Row="2" Rows="2" Columns="6" Margin="0,10" HorizontalAlignment="Center" Width="600" Height="120">
                    <TextBox x:Name="TxtSlot1" Text="Key 1" Tag="1" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot2" Text="Key 2" Tag="2" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot3" Text="Key 3" Tag="3" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot4" Text="Key 4" Tag="4" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot5" Text="Key 5" Tag="5" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot6" Text="Key 6" Tag="6" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot7" Text="Key 7" Tag="7" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot8" Text="Key 8" Tag="8" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot9" Text="Key 9" Tag="9" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot10" Text="Key 10" Tag="10" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot11" Text="Key 11" Tag="11" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                    <TextBox x:Name="TxtSlot12" Text="Key 12" Tag="12" GotFocus="TxtSlot_GotFocus" LostFocus="TxtSlot_LostFocus" KeyDown="TxtSlot_KeyDown" Margin="5" TextAlignment="Center" VerticalContentAlignment="Center"/>
                </UniformGrid>

                <!-- Row 3: 설정 컨트롤 (이름, 타겟, 버튼) -->
                <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                    <TextBlock x:Name="LblTarget" Text="레이어 이동:" VerticalAlignment="Center" Margin="0,0,5,0" Width="71"/>
                    <ComboBox x:Name="CboTargetLayer" Width="80" VerticalAlignment="Center" SelectedIndex="0" SelectionChanged="CboTargetLayer_SelectionChanged">
                        <ComboBoxItem Content="이동 없음" Tag="-1"/>
                        <ComboBoxItem Content="Fn 0" Tag="0"/>
                        <ComboBoxItem Content="Fn 1" Tag="1"/>
                        <ComboBoxItem Content="Fn 2" Tag="2"/>
                        <ComboBoxItem Content="Fn 3" Tag="3"/>
                        <ComboBoxItem Content="Fn 4" Tag="4"/>
                    </ComboBox>

                    <Button x:Name="BtnAutoDetect" Content="자동 감지" Click="BtnAutoDetect_Click" Padding="10,2" Margin="20,0,0,0"/>
                    <Button x:Name="BtnUnmap" Content="매핑해제" Click="BtnUnmap_Click" Padding="10,2" Margin="5,0,0,0"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- 하단: 버튼 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <CheckBox x:Name="ChkEnableFileLog" Content="로그 파일 저장" VerticalAlignment="Center" Margin="0,0,15,0" IsChecked="False"/>
            <CheckBox x:Name="ChkStartWithWindows" Content="윈도우 시작 시 자동 실행" VerticalAlignment="Center" Margin="0,0,10,0" Checked="ChkStartWithWindows_Checked" Unchecked="ChkStartWithWindows_Checked"/>
            <Button x:Name="BtnSave" Content="설정 저장" Click="BtnSave_Click" Padding="10,5" Margin="5"/>
            <Button x:Name="BtnHide" Content="트레이로 숨기기" Click="BtnHide_Click" Padding="10,5" Margin="5"/>
        </StackPanel>
    </Grid>
</Window>
