<Window x:Class="SayoOSD.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="600" Width="750" ResizeMode="NoResize" WindowStartupLocation="CenterOwner">
    <Grid>
        <TabControl Margin="5">
            <TabItem x:Name="TabGeneral" Header="일반 설정">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Margin="10">
                        <!-- 장치 설정 -->
                        <GroupBox x:Name="GrpDevice" Header="장치 설정" Padding="5" Margin="0,0,0,10">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock x:Name="LblVid" Text="VID:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtVid" Width="60" Margin="5,0,0,0"/>
                                    <Button x:Name="BtnScan" Content="검색" Click="BtnScan_Click" Margin="5,0,0,0" Padding="5,0"/>
                                    <ComboBox x:Name="CboDevices" Width="150" Margin="10,0,0,0" VerticalAlignment="Center" SelectionChanged="CboDevices_SelectionChanged"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock x:Name="LblPid" Text="PID:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtPid" Width="60" Margin="5,0,0,0"/>
                                    <Button x:Name="BtnApply" Content="적용" Click="BtnApply_Click" Margin="10,0,0,0" Padding="5,0"/>
                                    <TextBlock x:Name="MsgSayoOnly" Text="* SayoDevice만 감지합니다." Foreground="Gray" VerticalAlignment="Center" Margin="10,0,0,0" FontSize="11"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- OSD 설정 -->
                        <GroupBox x:Name="GrpOsd" Header="OSD 설정" Padding="5">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock x:Name="LblOpacity" Text="투명도:" VerticalAlignment="Center" Width="80"/>
                                    <Slider x:Name="SldOpacity" Width="150" Minimum="0.1" Maximum="1.0" TickFrequency="0.1" IsSnapToTickEnabled="True" VerticalAlignment="Center" ValueChanged="SldOpacity_ValueChanged"/>
                                    <TextBlock Text="{Binding ElementName=SldOpacity, Path=Value, StringFormat=N1}" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock x:Name="LblTimeout" Text="표시 시간(초):" VerticalAlignment="Center" Width="80"/>
                                    <TextBox x:Name="TxtTimeout" Width="40" VerticalAlignment="Center" TextChanged="TxtTimeout_TextChanged"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock x:Name="LblMode" Text="표시 모드:" VerticalAlignment="Center" Width="80"/>
                                    <ComboBox x:Name="CboMode" Width="150" VerticalAlignment="Center" SelectionChanged="CboMode_SelectionChanged">
                                        <ComboBoxItem Content="자동"/>
                                        <ComboBoxItem Content="항상 켜기"/>
                                        <ComboBoxItem Content="항상 끄기"/>
                                    </ComboBox>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox x:Name="ChkMoveOsd" Content="OSD 위치 이동 허용" VerticalAlignment="Center" Checked="ChkMoveOsd_CheckedChanged" Unchecked="ChkMoveOsd_CheckedChanged"/>
                                    <Button x:Name="BtnResetSize" Content="크기 초기화" Click="BtnResetSize_Click" Margin="20,0,0,0" Padding="5,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                    <TextBlock x:Name="LblTargetSettings" Text="설정 대상:" VerticalAlignment="Center" Width="80"/>
                                    <ComboBox x:Name="CboTarget" Width="200" Margin="0,0,10,0" VerticalAlignment="Center" SelectionChanged="CboTarget_SelectionChanged"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                    <TextBlock x:Name="LblOsdColor" Text="OSD 색상:" VerticalAlignment="Center" Width="80"/>
                                    <Button x:Name="BtnGlobalBgColor" Content="배경색" Click="BtnGlobalBgColor_Click" Margin="0,0,5,0" Padding="5,0"/>
                                    <Button x:Name="BtnGlobalHighlightColor" Content="강조색" Click="BtnGlobalHighlightColor_Click" Margin="0,0,5,0" Padding="5,0"/>
                                    <Button x:Name="BtnGlobalBorderColor" Content="테두리색" Click="BtnGlobalBorderColor_Click" Padding="5,0"/>
                                    <Button x:Name="BtnGlobalResetColor" Content="초기화" Click="BtnGlobalResetColor_Click" Margin="5,0,0,0" Padding="5,0"/>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                    <TextBlock x:Name="LblOsdFont" Text="OSD 폰트:" VerticalAlignment="Center" Width="80"/>
                                    <ComboBox x:Name="CboFontFamily" Width="120" Margin="0,0,5,0" SelectionChanged="CboFontFamily_SelectionChanged"/>
                                    <TextBox x:Name="TxtFontSize" Width="40" Margin="0,0,5,0" VerticalAlignment="Center" TextChanged="TxtFontSize_TextChanged"/>
                                    <ComboBox x:Name="CboFontWeight" Width="80" Margin="0,0,5,0" SelectionChanged="CboFontWeight_SelectionChanged"/>
                                    <Button x:Name="BtnFontReset" Content="초기화" Click="BtnFontReset_Click" Padding="5,0"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- 오디오 설정 -->
                        <GroupBox x:Name="GrpAudio" Header="오디오 설정" Padding="5" Margin="0,10,0,0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock x:Name="LblVolumeStep" Text="볼륨 조절 단위:" VerticalAlignment="Center" Width="100"/>
                                <Slider x:Name="SldVolumeStep" Width="200" Minimum="1" Maximum="100" TickFrequency="1" IsSnapToTickEnabled="True" VerticalAlignment="Center" ValueChanged="SldVolumeStep_ValueChanged"/>
                                <TextBlock Text="{Binding ElementName=SldVolumeStep, Path=Value, StringFormat={}{0}}" VerticalAlignment="Center" Margin="10,0,0,0" FontWeight="Bold"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- 시스템 설정 -->
                        <GroupBox x:Name="GrpSystem" Header="시스템 설정" Padding="5" Margin="0,10,0,0">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                    <TextBlock Text="Language:" VerticalAlignment="Center" Width="80"/>
                                    <ComboBox x:Name="CboLanguage" Width="150" SelectionChanged="CboLanguage_SelectionChanged"/>
                                </StackPanel>
                                <CheckBox x:Name="ChkEnableFileLog" Content="로그 파일 저장" Margin="0,5,0,0" Checked="ChkEnableFileLog_CheckedChanged" Unchecked="ChkEnableFileLog_CheckedChanged"/>
                                <CheckBox x:Name="ChkStartWithWindows" Content="윈도우 시작 시 자동 실행" Margin="0,5,0,0" Checked="ChkStartWithWindows_CheckedChanged" Unchecked="ChkStartWithWindows_CheckedChanged"/>
                                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                    <TextBlock x:Name="LblPaletteFontSize" Text="기능 팔레트 폰트 크기:" VerticalAlignment="Center" Width="140"/>
                                    <Slider x:Name="SldPaletteFontSize" Width="150" Minimum="10" Maximum="24" TickFrequency="1" IsSnapToTickEnabled="True" VerticalAlignment="Center" ValueChanged="SldPaletteFontSize_ValueChanged"/>
                                    <TextBlock Text="{Binding ElementName=SldPaletteFontSize, Path=Value, StringFormat={}{0}}" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem x:Name="TabProfiles" Header="앱 프로필">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <CheckBox x:Name="ChkEnableAppProfiles" Content="가상 레이어(앱 프로필) 기능 활성화" 
                              IsChecked="{Binding EnableAppProfiles}" Margin="0,0,0,10"/>

                    <DataGrid x:Name="DgProfiles" Grid.Row="1" ItemsSource="{Binding AppProfiles}" 
                              AutoGenerateColumns="False" CanUserAddRows="False" Margin="0,0,0,10" BorderBrush="#CCCCCC" BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="프로필 이름" Binding="{Binding Name}" Width="150"/>
                            <DataGridTextColumn Header="연결된 프로세스 (.exe)" Binding="{Binding ProcessName}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
                        <TextBlock x:Name="LblFallbackProfile" Text="기본 프로필(Fallback):" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <ComboBox x:Name="CboFallback" ItemsSource="{Binding AppProfiles}" DisplayMemberPath="Name" SelectedValuePath="Name" 
                                  SelectedValue="{Binding FallbackProfileId}" Width="120" Margin="0,0,20,0"/>
                        
                        <Button x:Name="BtnAddProfile" Content="추가" Click="BtnAddProfile_Click" Width="80" Margin="0,0,5,0"/>
                        <Button x:Name="BtnDeleteProfile" Content="삭제" Click="BtnDeleteProfile_Click" Width="80" Margin="0,0,10,0"/>
                        <Button x:Name="BtnExportProfile" Content="내보내기" Click="BtnExportProfile_Click" Width="80" Margin="0,0,5,0"/>
                        <Button x:Name="BtnImportProfile" Content="가져오기" Click="BtnImportProfile_Click" Width="80"/>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>